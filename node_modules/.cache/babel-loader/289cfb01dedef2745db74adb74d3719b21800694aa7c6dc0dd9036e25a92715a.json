{"ast":null,"code":"import*as PIXI from'pixi.js';import anime from'animejs';const Reel=function(_ref){let{positions,spinValues,speed,useBlurredSymbols,bounceDepthPerc,bounceDuration,symbolMargin,maskPaddingX,maskPaddingY}=_ref;this.positions=positions;this.values=[];this._spinValues=spinValues.slice();this.spinValues=spinValues.slice();this.stopValues=[];this.symbols=[];this.container=new PIXI.Container();this.mask=new PIXI.Graphics();this.offset=0;this.rolling=false;this.stopping=false;this.symbolMargin=symbolMargin;this.speed=speed;this.bounceDepthPerc=bounceDepthPerc;this.bounceDuration=bounceDuration;this.stopFns=[];this.startFns=[];this.maskPaddingX=maskPaddingX||0;this.maskPaddingY=maskPaddingY||0;this.useBlurredSymbols=useBlurredSymbols||false;this.container.mask=this.mask;for(var i=0;i<positions+1;i++){var symbol=new PIXI.Sprite(PIXI.Texture.EMPTY);this.container.addChild(symbol);this.symbols.push(symbol);}};Reel.prototype.render=function(){var _this=this;var m=_this.mask;m.x=_this.container.x;m.y=_this.container.y;m.clear();m.beginFill(0x000000);m.drawRect(0-this.maskPaddingX,0-this.maskPaddingY,_this.symbols[0].width+this.maskPaddingX*2,(_this.symbols[0].height+this.symbolMargin+this.maskPaddingY)*_this.positions-this.symbolMargin);m.endFill();for(var i=0;i<_this.symbols.length;i++){var symbol=_this.symbols[i];symbol.anchor.set(0.5,0.5);let symbolWidth=0,symbolHeight=0;if(_this.values[i]){if(this.rolling){if(this.useBlurredSymbols){symbol.texture=PIXI.Texture.from('symbol-'+_this.values[i]+'-blurred');}else{symbol.texture=PIXI.Texture.from('symbol-'+_this.values[i]);}}else{symbol.texture=PIXI.Texture.from('symbol-'+_this.values[i]);}symbolWidth=symbol.width;symbolHeight=symbol.height;}else{symbol.texture=PIXI.Texture.EMPTY;}if(symbol.hide){symbol.texture=PIXI.Texture.EMPTY;}symbol.x=symbolWidth/2;symbol.y=(symbolHeight+this.symbolMargin)*(i-1)+(0+_this.offset);symbol.y+=symbolHeight/2;}if(this.rolling){this.offset+=this.symbols[0].height*this.speed;if(this.offset>=this.symbols[0].height){this.offset=0;if(!isNaN(parseInt(this.stopping))){this.values.unshift(this.stopValues.pop());this.stopping++;}else{this.values.unshift(this._spinValues.pop());if(this._spinValues.length===0){this._spinValues=this.spinValues.slice();}}this.values.splice(-1,1);}if(this.stopping==this.positions+1){this.rolling=false;this.stopping++;var o={offset:_this.symbols[0].height*this.bounceDepthPerc};this.offset=o.offset;anime({targets:o,offset:0,round:1,duration:this.bounceDuration,easing:'easeOutQuint',update:function(){_this.offset=o.offset;},complete:function(){_this.stopping=false;for(let i=0;i<_this.stopFns.length;i++){const fn=_this.stopFns[i];if(fn.once){_this.stopFns.splice(i--,1);}fn();}}});}}};Reel.prototype.roll=function(){if(!this.rolling&&this.stopping===false){this.rolling=true;for(let i=0;i<this.startFns.length;i++){const fn=this.startFns[i];if(fn.once){this.startFns.splice(i--,1);}fn();}}};Reel.prototype.stop=function(){if(this.rolling&&this.stopping===false){this.stopping=0;}};Reel.prototype.onceStop=function(fn){fn.once=true;this.stopFns.push(fn);};Reel.prototype.onStop=function(fn){this.stopFns.push(fn);};Reel.prototype.onceStart=function(fn){fn.once=true;this.startFns.push(fn);};Reel.prototype.onStart=function(fn){this.startFns.push(fn);};export default Reel;","map":{"version":3,"names":["PIXI","anime","Reel","_ref","positions","spinValues","speed","useBlurredSymbols","bounceDepthPerc","bounceDuration","symbolMargin","maskPaddingX","maskPaddingY","values","_spinValues","slice","stopValues","symbols","container","Container","mask","Graphics","offset","rolling","stopping","stopFns","startFns","i","symbol","Sprite","Texture","EMPTY","addChild","push","prototype","render","_this","m","x","y","clear","beginFill","drawRect","width","height","endFill","length","anchor","set","symbolWidth","symbolHeight","texture","from","hide","isNaN","parseInt","unshift","pop","splice","o","targets","round","duration","easing","update","complete","fn","once","roll","stop","onceStop","onStop","onceStart","onStart"],"sources":["/home/user/Desktop/Projects/RoyalGames/royalgames-client/src/slot/Reel.js"],"sourcesContent":["import * as PIXI from 'pixi.js';\nimport anime from 'animejs';\n\nconst Reel = function({\n  positions,\n  spinValues,\n  speed,\n  useBlurredSymbols,\n  bounceDepthPerc,\n  bounceDuration,\n  symbolMargin,\n  maskPaddingX,\n  maskPaddingY,\n}) {\n  this.positions = positions;\n  this.values = [];\n  this._spinValues = spinValues.slice();\n  this.spinValues = spinValues.slice();\n  this.stopValues = [];\n  this.symbols = [];\n  this.container = new PIXI.Container();\n  this.mask = new PIXI.Graphics();\n  this.offset = 0;\n  this.rolling = false;\n  this.stopping = false;\n  this.symbolMargin = symbolMargin;\n  this.speed = speed;\n  this.bounceDepthPerc = bounceDepthPerc;\n  this.bounceDuration = bounceDuration;\n  this.stopFns = [];\n  this.startFns = [];\n  this.maskPaddingX = maskPaddingX || 0;\n  this.maskPaddingY = maskPaddingY || 0;\n  this.useBlurredSymbols = useBlurredSymbols || false;\n\n  this.container.mask = this.mask;\n\n  for (var i = 0; i < positions + 1; i++) {\n    var symbol = new PIXI.Sprite(PIXI.Texture.EMPTY);\n    this.container.addChild(symbol);\n    this.symbols.push(symbol);\n  }\n};\n\nReel.prototype.render = function() {\n  var _this = this;\n\n  var m = _this.mask;\n  m.x = _this.container.x;\n  m.y = _this.container.y;\n  m.clear();\n  m.beginFill(0x000000);\n  m.drawRect(0 - this.maskPaddingX, 0 - this.maskPaddingY, _this.symbols[0].width + (this.maskPaddingX * 2), ((_this.symbols[0].height + this.symbolMargin + this.maskPaddingY) * _this.positions) - this.symbolMargin);\n  m.endFill();\n\n  for (var i = 0; i < _this.symbols.length; i++) {\n    var symbol = _this.symbols[i];\n    symbol.anchor.set(0.5, 0.5);\n    let symbolWidth = 0, symbolHeight = 0;\n\n    if (_this.values[i]) {\n      if (this.rolling) {\n        if (this.useBlurredSymbols) {\n          symbol.texture = PIXI.Texture.from('symbol-' + _this.values[i] + '-blurred');\n        } else {\n          symbol.texture = PIXI.Texture.from('symbol-' + _this.values[i]);\n        }\n      } else {\n        symbol.texture = PIXI.Texture.from('symbol-' + _this.values[i]);\n      }\n\n      symbolWidth = symbol.width;\n      symbolHeight = symbol.height;\n    } else {\n      symbol.texture = PIXI.Texture.EMPTY;\n    }\n\n    if (symbol.hide) {\n      symbol.texture = PIXI.Texture.EMPTY;\n    }\n\n    symbol.x = symbolWidth / 2;\n    symbol.y = ((symbolHeight + this.symbolMargin) * (i - 1)) + (0 + _this.offset);\n    symbol.y += symbolHeight / 2;\n  }\n\n  if (this.rolling) {\n    this.offset += this.symbols[0].height * this.speed;\n\n    if (this.offset >= this.symbols[0].height) {\n      this.offset = 0;\n      if (!isNaN(parseInt(this.stopping))) {\n        this.values.unshift(this.stopValues.pop());\n        this.stopping++;\n      } else {\n        this.values.unshift(this._spinValues.pop());\n\n        if (this._spinValues.length === 0) {\n          this._spinValues = this.spinValues.slice();\n        }\n      }\n      this.values.splice(-1, 1);\n    }\n\n    if (this.stopping == this.positions + 1) {\n      this.rolling = false;\n      this.stopping++;\n      var o = {\n        offset: _this.symbols[0].height * this.bounceDepthPerc,\n      };\n      this.offset = o.offset;\n      anime({\n        targets: o,\n        offset: 0,\n        round: 1,\n        duration: this.bounceDuration,\n        easing: 'easeOutQuint',\n        update: function() {\n          _this.offset = o.offset;\n        },\n        complete: function() {\n          _this.stopping = false;\n          \n          for (let i = 0; i < _this.stopFns.length; i++) {\n            const fn = _this.stopFns[i];\n\n            if (fn.once) {\n              _this.stopFns.splice(i--, 1);\n            }\n\n            fn();\n          }\n        },\n      });\n    }\n  }\n};\n\nReel.prototype.roll = function() {\n  if (!this.rolling && this.stopping === false) {\n    this.rolling = true;\n\n    for (let i = 0; i < this.startFns.length; i++) {\n      const fn = this.startFns[i];\n\n      if (fn.once) {\n        this.startFns.splice(i--, 1);\n      }\n\n      fn();\n    }\n  }\n};\n\nReel.prototype.stop = function() {\n  if (this.rolling && this.stopping === false) {\n    this.stopping = 0;\n  }\n};\n\nReel.prototype.onceStop = function(fn) {\n  fn.once = true;\n  this.stopFns.push(fn);\n};\n\nReel.prototype.onStop = function(fn) {\n  this.stopFns.push(fn);\n};\n\nReel.prototype.onceStart = function(fn) {\n  fn.once = true;\n  this.startFns.push(fn);\n};\n\nReel.prototype.onStart = function(fn) {\n  this.startFns.push(fn);\n};\n\nexport default Reel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}